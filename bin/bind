#!/bin/bash

# Define source and destination paths
options_source="./topologies/named.conf.options"
local_source="./topologies/named.conf.local"
local_zone_source="./topologies/local.zone"
reverse_zone_source="./topologies/reverse.zone"

options_destination="/etc/bind/named.conf.options"
local_destination="/etc/bind/named.conf.local"
local_zone_destination="/etc/bind/local.zone"
reverse_zone_destination="/etc/bind/reverse.zone"

# Function to copy files
copy_file() {
    if [ -f "$1" ]; then
        cp "$1" "$2"
        echo "Copied $1 to $2"
    else
        echo "Error: $1 does not exist."
    fi
}

# Copy named.conf.options
copy_file "$options_source" "$options_destination"

# Copy named.conf.local
copy_file "$local_source" "$local_destination"

# Copy local.zone
copy_file "$local_zone_source" "$local_zone_destination"

# Copy reverse.zone
copy_file "$reverse_zone_source" "$reverse_zone_destination"

# Start the bind9 service
echo "bind9 running..."
/usr/sbin/named -f -c /etc/bind/named.conf -u bind
